(this["webpackJsonpinfinity-scroll-example"]=this["webpackJsonpinfinity-scroll-example"]||[]).push([[0],{28:function(t,e,n){},47:function(t,e,n){},48:function(t,e,n){},49:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n(1),i=n.n(c),s=n(19),o=n.n(s),r=(n(28),n(10)),l=n(7),b=n(6),u=n(9),j=n.n(u),d=n(20),h=n(21),p=n.n(h),O="https://jsonplaceholder.typicode.com",f=function(){var t=Object(d.a)(j.a.mark((function t(e){var n,a,c=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:10,a="".concat(O,"/posts?_start=").concat(e,"&_limit=").concat(n),t.abrupt("return",p()(a));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=n(22),g=n.n(m),x=(n(47),function(t){var e=t.post,n=t.className,i=t.animate,s=void 0!==i&&i,o=e.title,r=e.body,u=Object(c.useRef)(null),j=Object(c.useState)(!1),d=Object(l.a)(j,2),h=d[0],p=d[1],O=Object(c.useCallback)((function(t){p(t.visible)}),[]);Object(b.b)({targetRef:u,onVisibilityChange:O});var f=g()(n,"post",{show:s&&h},{hide:s&&!h});return Object(a.jsxs)("div",{className:f,ref:u,children:[Object(a.jsx)("h3",{className:"post__title",children:o}),Object(a.jsx)("p",{className:"post__body",children:r})]})}),v=(n(48),n(3)),y="LOADING_START",N="LOADING_DONE",_="LOADING_FAIL",k=function(t,e){var n=e.type,a=e.payload;switch(n){case y:return Object(v.a)(Object(v.a)({},t),{},{loading:!0});case N:return Object(v.a)(Object(v.a)({},a),{},{loading:!1});case _:return Object(v.a)(Object(v.a)({},t),{},{loading:!1});default:return t}},w=function(){var t=Object(c.useReducer)(k,{total:1/0,posts:[],start:0,loading:!1}),e=Object(l.a)(t,2),n=e[0],i=e[1],s=n.start,o=n.posts,u=n.loading,j=n.total,d=Object(c.useCallback)((function(){i({type:y}),f(s,10).then((function(t){i({type:N,payload:{total:+t.headers["x-total-count"],posts:[].concat(Object(r.a)(o),Object(r.a)(t.data)),start:s+10}})})).catch((function(t){console.log(t),i({type:_})}))}),[s,o]),h=Object(c.useCallback)((function(t){var e=t.visible,n=t.directionY;!u&&e&&"up"===n&&d()}),[d,u]);return Object(c.useEffect)((function(){d()}),[]),Object(a.jsxs)("div",{className:"posts-list",children:[Object(a.jsx)("h2",{children:"Example of implementing a list with data loading by scrolling, and animation when blocks appear on the screen"}),Object(a.jsxs)("p",{children:["Data is taken from ",Object(a.jsx)("a",{href:"http://jsonplaceholder.typicode.com",children:"jsonplaceholder"}),Object(a.jsx)("br",{}),"Loading and animation are implemented using"," ",Object(a.jsx)("a",{href:"https://github.com/behuamuh/react-visibility-detector",children:"react-visibility-detector"}),Object(a.jsx)("br",{}),"The code is available ",Object(a.jsx)("a",{href:"https://github.com/behuamuh/infinity-scroll-example",children:"here"})]}),o.map((function(t,e){return Object(a.jsx)(x,{post:t,animate:e%4===0,className:"posts-list__item"},t.id)})),u&&"...loading",j>o.length&&Object(a.jsx)(b.a,{onVisibilityChange:h})]})};var C=function(){return Object(a.jsx)("div",{className:"app",children:Object(a.jsx)(w,{})})},L=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,i=e.getLCP,s=e.getTTFB;n(t),a(t),c(t),i(t),s(t)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root")),L()}},[[49,1,2]]]);
//# sourceMappingURL=main.e2a9c16a.chunk.js.map